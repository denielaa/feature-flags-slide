import { CodeSurfer as Surfer } from "code-surfer";
import { Appear, Background } from "gatsby-theme-mdx-deck";
import customTheme from "../src/theme";
import * as L from "../src/layout";

export const theme = customTheme;

<L.Column sx={{ minHeight: '60%', ml: 5 }}>

# Feature Flags & Continuous Delivery

</L.Column>

---

<L.Column>

# Hi! 👋🏻 I'm **Deniel**

- A Mediocre Software Engineer
- 13 years of experience as a Software Engineer
- ~ 7 years experience working remotely
- Fullstack (BE heavy) -> Frontend

</L.Column>

---

import Release from '../assets/release.webp';

## Release a major new feature

<img src={Release} width="40%" />

---

import SystemError from '../assets/system-error.webp';

<img src={SystemError} width="80%" />

---

import UserError from '../assets/user-error.jpeg';

<img src={UserError} width="40%" />

---

<L.Column>

## Solutions

<ul>
  <li>Maintenance mode</li>
  <li>Rollback</li>
</ul>

### ...but a better option is _Feature Flags_

</L.Column>

---

<L.Column>

## Today we'll learn about...

- What are Feature Flags?
- Benefits of Feature Flags
- Drawbacks of Feature Flags
- How to implement Feature Flags? _(Best Practices)_

### ...and how to _work remotely in Global Company_

</L.Column>

---

<Surfer>

```js title="Feature Flags"
if (featureFlags.isFeatureEnabled('NewPaymentOption')) {
  RenderNewPaymentOption()
} else {
  RenderOldPaymentOption()
}
```

</Surfer>

---

<Surfer>

```js
import { CreditCardPayment } from './CreditCardPayment';
import { BitcoinPayment } from './BitcoinPayment';
import { NewPaymentOption } from './NewPaymentOption';

const PaymentOptions = () => {
  return (
    <div>
      <h3>Select payment option:</h3>
      <ul>
        <li><CreditCardPayment /></li>
        <li><BitcoinPayment /></li>
        <li><NewPaymentOption /></li>
      </ul>
    </div>
  );
};
```

```diff 3,12 title="Release a new payment option"
```

```js title="Release with Feature Flag"
import { CreditCardPayment } from './CreditCardPayment';
import { BitcoinPayment } from './BitcoinPayment';
import { NewPaymentOption } from './NewPaymentOption';
import { featureFlags } from './featureFlags';

const PaymentOptions = () => {
  return (
    <div>
      <h3>Select payment option:</h3>
      <ul>
        <li><CreditCardPayment /></li>
        <li><BitcoinPayment /></li>
        {featureFlags.isFeatureEnabled('NewPaymentOption') &&
          <li><NewPaymentOption /></li>
        }
      </ul>
    </div>
  );
};
```

</Surfer>

---

import Switch from '../assets/switch.png';

## What are Feature Flags?

<img src={Switch} width="60%" />

---


## Why use Feature Flags?

- Release anytime, Deployment != Release
- Progressive Delivery
- User Segmentation/Targeting
- Kill Switch, Minimize Risk

---

<L.Column>

## Feature Flag use cases

### _Why is this simple if statement so powerful?_

</L.Column>

---

import ProductTesting from '../assets/product-testing.png';

### _Product Testing_

<img src={ProductTesting} width="50%" />

---

import ABTesting from '../assets/ab-testing.webp';

### _Conducting Experiments_

<img src={ABTesting} width="50%" />

---

import DBMigration1 from '../assets/db-migration-1.svg';

### _Database Migration_

<DBMigration1 />

---

import DBMigration2 from '../assets/db-migration-2.svg';

### _Database Migration_

<DBMigration2 />

---

import DBMigration3 from '../assets/db-migration-3.svg';

### _Database Migration_

<DBMigration3 />

---

import DBMigration4 from '../assets/db-migration-4.svg';

### _Database Migration_

<DBMigration4 />

---

import DBMigration5 from '../assets/db-migration-5.svg';

### _Database Migration_

<DBMigration5 />

---

import DBMigration6 from '../assets/db-migration-6.svg';

### _Database Migration_

<DBMigration6 />

---

import cd from '../assets/cd.png';

### _Continuous Delivery_

<img src={cd} width="80%" />

---

<L.Column>

## Implementing a feature flag

- Glorified 'if statement'
- Implement your own or library
- Use a Saas provider (LaunchDarkly, Unleash, etc)
- Ideally should be low latency, cached, have an audit trail

</L.Column>

---

import KnightCapital from '../assets/knight-capital.png';

<img src={KnightCapital} width="50%" />

---

<Background />

## What's next?

- Try Feature Flags with simple library
- Research deeper into the Best Practices
- Check out Trunk Based Development

---

## More Questions?

- LinkedIn [denielaa](https://www.linkedin.com/in/denielaa/)

Slide deck is available at [github/denielaa/](https://github.com/denielaa/feature-flags-slide)
